## Kimball Approch

We are using the Kimball approach (Star Schema). How do we go from a vague business request to a diagram? 

**We follow these four steps:**

### Select the Business Process:

- What real-world event are we tracking? (e.g., "A customer scans an item at a checkout register" or "A user clicks a button on a website").

- Avoid: Don't model "Departments" or "Reports." Model Events. 

### Declare the Grain:

Crucial Step. What does one row represent?

- **Example:** Does a row represent the entire receipt (Grain = Transaction), or a single line item on that receipt (Grain = Line Item)?

- **Rule:** Always choose the lowest atomic level possible. You can always sum up, but you can't drill down if you summarize too early. 

### Identify the Dimensions (The "Context"):

- Who, What, Where, When?

- These become your Dimension Tables (e.g., dim_customer, dim_product, dim_store, dim_date). 

### Identify the Facts (The "Measurements"):

- What are we counting?

- These are usually numeric values (e.g., quantity_sold, unit_price, tax_amount, discount_amount). These go into the central Fact Table.

## Surrogate Keys

### The Problem: 

The source system (e.g., the Cash Register software) identifies products with ID A123. If the store switches software, A123 might become 99-555. Your warehouse will break.

### The Solution: 

The Warehouse generates its own IDs.

- **Natural Key:** A123 (From Source).

- **Surrogate Key:** 1001 (An integer generated by your PostgreSQL database).

### Benefit: 

This "decouples" your warehouse from the source. If the source changes, you only update your mapping; you don't break your history.

---